if(typeof(obips.Map)=="undefined"){obips.Map=function(){};obips.Map.resourceFile="views/map/obips.map.xml";obips.Map.k_sFactoryName="obips_mapfactory";obips.Map.k_sLayerLabel="_layer_";obips.Map.k_sColorScheme="colorScheme";obips.Map.k_sLineScheme="lineScheme";obips.Map.k_sPieChart="pieChart";obips.Map.k_sVariableMarker="variableMarker";obips.Map.k_sMarkerBubble="circle";obips.Map.k_sMarkerImage="image";obips.Map.k_sBarChart="barChart";obips.Map.k_sDotDensity="dotDensity";obips.Map.k_nThemeLayerType=0;obips.Map.k_nXYLayerType=1;obips.Map.k_nCollapse=0;obips.Map.k_nExpand=1;obips.Map.k_bVisible=true;obips.Map.k_bInvisible=false;obips.Map.g_MDCache=null;obips.Map.g_currentEditor=null;obips.Map.kInteractionNone=0;obips.Map.kInteractionDrill=1;obips.Map.kInteractionActions=2;obips.Map.kInteractionClientEvent=3;obips.Map.ASCENDING_SORT_ORDER=0;obips.Map.DESCENDING_SORT_ORDER=1;obips.Map.kNSDP_SPATIAL=0;obips.Map.kNSDP_USER_PROP=1;obips.Map.kNSDP_VALUE=2;obips.Map.kNSDP_ROWID=3;obips.Map.kNSDP_VISUAL_PROP_VALUE=4;obips.Map.k_nDummyCounter=0;obips.Map.k_sPolygonGeomType="polygon";obips.Map.k_sPointGeomType="point";obips.Map.k_sLineGeomType="line";obips.Map.k_sMultiLineGeomType="multiline";obips.Map.k_sPanMode="panMode";obips.Map.k_sZoomInMode="zoomInMode";obips.Map.k_sZoomOutMode="zoomOutMode";obips.Map.k_sMarqueeZoomInMode="marqueeZoomInMode";obips.Map.k_sPolygonSelectionMode="polygonSelectionMode";obips.Map.k_sRectangeSelectionMode="rectangeSelectionMode";obips.Map.k_sCircularSelectionMode="circularSelectionMode";obips.Map.k_sPointSelectionMode="pointSelectionMode";obips.Map.k_sDistanceMode="distanceMode";obips.Map.k_sAreaMode="areaMode";obips.Map.k_sInformationMode="informationMode";obips.Map.k_sInteractionMode="interactionMode";obips.Map.bUseMobile=false;obips.Map.bUseJQueryForMobile=true;obips.Map.mobileClassHash=null;obips.Map.MAP_POSITION_TOP_LEFT=1;obips.Map.MAP_POSITION_TOP_RIGHT=2;obips.Map.MAP_POSITION_BOTTOM_RIGHT=3;obips.Map.MAP_POSITION_BOTTOM_LEFT=4;obips.Map.Add_VML_NS=function(){if(saw.userAgent.is_ie){if(obips.Map.k_bAddVMLNS!=true){try{if(!document.documentMode||document.documentMode<8){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.styleSheets[0].addRule("v\\:*","behavior:url(#default#VML);display:inline-block")}else{if(document.documentMode&&document.documentMode>=8){if(document.namespaces){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")}document.styleSheets[0].addRule("v\\:shape","behavior:url(#default#VML);display:inline-block");document.styleSheets[0].addRule("v\\:line","behavior:url(#default#VML);display:inline-block");document.styleSheets[0].addRule("v\\:arc","behavior:url(#default#VML);display:inline-block");document.styleSheets[0].addRule("v\\:group","behavior:url(#default#VML);display:inline-block");document.styleSheets[0].addRule("v\\:rect","behavior:url(#default#VML);display:inline-block")}}obips.Map.k_bAddVMLNS=true}catch(a){alert(a)}}}};obips.Map.Add_VML_NS();obips.Map.getRemoteMapViewerURL=function(){return obips.Map.RemoteMapviewerURL};obips.Map.getProxyContextPath=function(){var a="";if(obips.Map.SyndicateMode){a+=obips.Map.ExternalProxyContext}else{a+=obips.Map.ProxyContext}return a};obips.Map.getMapViewerProxyPath=function(){return obips.Map.getProxyContextPath()+"/proxy"};obips.Map.getMapViewerURL=function(){var a=obips.Map.getRemoteMapViewerURL();if(!a||(a.length<=0)){return obips.Map.getProxyContextPath()}return a};obips.Map.commandToURL=function(a){if(obips.Map.getRemoteMapViewerURL()){return obips.Map.getProxyContextPath()+"/proxy?rtarget="+saw.encodeURIComponent(obips.Map.getRemoteMapViewerURL()+"/"+a+"&")}else{return obips.Map.getProxyContextPath()+"/"+a+"?"}};obips.Map.getDummyCounter=function(){return ++obips.Map.k_nDummyCounter};obips.Map.isEditorMode=function(){if((typeof(obips.Map.g_currentEditor)!="undefined")&&(typeof(XUIPanel)!="undefined")){var a=XUIPanel.getEditor(obips.Map.g_currentEditor);if(a&&(typeof(a.getPreviewArea)!="undefined")){return true}}return false};obips.Map.getController=function(b){var c=obips.Map.Factory.getSingleton();var a=c.getController(b);return a};obips.Map.getModel=function(b){var a=obips.Map.getController(b);if(a){return a.viewer.model}return null};obips.Map.getViewer=function(b){var a=obips.Map.getController(b);if(a){return a.viewer}return null};obips.Map.getMapView=function(b){var a=obips.Map.getController(b);if(a){return a.viewer.mapview}return null};obips.Map.useExperimentalMapFeatures=function(){return(obips.Map.ExperimentalFeaturesEnabled==true)};obips.Map.createMapviewerErrorMessage=function(f,r,d,n){d=(d!=undefined)?d:obips.Map.resourceFile;var w=saw.createTable(null,null,r);var o=0;var q=obips.ResourceManager.getSingleton();if(obips.Map.useMobile()){w.style.padding="4px"}if(n){var e=w.insertRow(o);o+=1;var i=e.insertCell(0);var z=i.appendChild(document.createElement("IMG"));var v=q.getURL(obips.MessageDialog.resourceFile,obips.MessageDialog.TITLE_IMAGE_ERROR).url;z.src=v;z.alt="";var h=e.insertCell(1);h.className="ErrorTitle";var u=q.getResource(d,"kmsgMapviewerErrorTitle").getString();saw.appendTextNode(h,u)}var e=w.insertRow(o);if(n){var y=e.appendChild(document.createElement("TD"))}var m=saw.createChildElement(e,"TD","ErrorInfo");m.style.paddingLeft="8px";var p=saw.createChildElement(m,"DIV");var u=q.getResource(d,"kmsgMapviewerGenericMsg").getString();saw.appendTextNode(p,u);var x=saw.createChildElement(m,"DIV");x.style.marginTop="2px";x.bCollapsed=true;x.isMapErrorDetailsDiv=true;var s=obips.Map.useMobile()?"touchend":"click";saw.addEventListener(x,s,obips.Map.handleMapviewerErrorDetails,null,false);var l=saw.createChildElement(x,"IMG");l.src=kimgCollapsed;l.alt="";var k=saw.createChildElement(x,"A");var t=q.getResource(d,"kmsgErrorDetailsLink").getString();k.href="javascript:void(null)";k.onclick=function(A){return false};k.style.paddingLeft="6px";saw.appendTextNode(k,t);var g=saw.createChildElement(x,"DIV");g.style.marginLeft="15px";g.style.display="none";var b=saw.createChildElement(g,"DIV");var a=q.getResource(d,"kmsgMapviewerEncounteredErrorsLabel").getString();saw.appendTextNode(b,a);var c=saw.createChildElement(g,"DIV");if(r&&r.offsetWidth){var j=r.offsetWidth-45;if(j>0){c.style.maxWidth=j+"px";c.style["white-space"]="normal"}}saw.appendTextNode(c,f);return w};obips.Map.handleMapviewerErrorDetails=function(b){if(b==undefined){return}var d=saw.getEventTarget(b);while((d!=undefined)&&(d.isMapErrorDetailsDiv!=true)){d=d.parentNode}if(d){var a=(d.bCollapsed==true);var e=d.getElementsByTagName("IMG");if(e&&(e.length>0)){e[0].src=(a?kimgExpanded:kimgCollapsed)}var c=d.getElementsByTagName("DIV");if(c&&(c.length>0)){c[0].style.display=(a?"block":"none")}d.bCollapsed=(!a)}};obips.Map.useMobile=function(){return obips.Map.bUseMobile};obips.Map.setUseMobile=function(a){obips.Map.bUseMobile=false;var i=MVMapView.version;i=(i!=undefined)?i:"";var d=i.split("_B");var h=null;if(d.length==2){h=d[1];h=parseInt(h)}var g=((h!=undefined)&&(h>=110513));g=true;var b=false;var c=false;try{b=window.jQuery&&(jQuery!=undefined);c=(obips.mobile!=undefined)&&(obips.mobile.PopUpWindow!=undefined)}catch(f){}if(g&&b&&c){obips.Map.bUseMobile=a}};obips.Map.useJQueryForMobile=function(){return obips.Map.useMobile()};obips.Map.getMobileSafeClassName=function(a){if(!obips.Map.mobileClassHash){obips.Map.initializeMobileClassHash()}var b=obips.Map.mobileClassHash[a];if(b){return b}else{return a}};obips.Map.initializeMobileClassHash=function(){obips.Map.mobileClassHash=new Object();var a=obips.Map.useMobile();obips.Map.mobileClassHash.ClickedToolTipRow=a?"ClickedToolTipRow ui-tooltip-text":"ClickedToolTipRow";obips.Map.mobileClassHash.MapToolTipPrimaryLabel=a?"MapToolTipPrimaryLabel ui-tooltip-text":"MapToolTipPrimaryLabel";obips.Map.mobileClassHash.MapToolTipPrimaryValue=a?"MapToolTipPrimaryValue ui-tooltip-text":"MapToolTipPrimaryValue";obips.Map.mobileClassHash.MapToolTipSecondaryLabel=a?"MapToolTipSecondaryLabel ui-tooltip-text":"MapToolTipSecondaryLabel";obips.Map.mobileClassHash.MapToolTipSecondaryValue=a?"MapToolTipSecondaryValue ui-tooltip-text":"MapToolTipSecondaryValue";obips.Map.mobileClassHash.MapToolTipTertiaryLabel=a?"MapToolTipTertiaryLabel ui-tooltip-text":"MapToolTipTertiaryLabel";obips.Map.mobileClassHash.MapToolTipTertiaryValue=a?"MapToolTipTertiaryValue ui-tooltip-text":"MapToolTipTertiaryValue";obips.Map.mobileClassHash.InteractionFOI=a?"InteractionFOI_Mobile":"InteractionFOI";obips.Map.mobileClassHash.FormatLabelText=a?"FormatLabelText FormatLabelText_Mobile":"FormatLabelText";obips.Map.mobileClassHash.ConstrainedFormatLabelText=a?"ConstrainedFormatLabelText ConstrainedFormatLabelText_Mobile":"ConstrainedFormatLabelText";obips.Map.mobileClassHash.SpatialLayerTable=a?"SpatialLayerTable_Mobile":"SpatialLayerTable"}};