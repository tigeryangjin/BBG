--商品重新分类ROLE_ID
SELECT * FROM RAINY_ROLE WHERE ROLE_EXT LIKE '%RECL%';
--拥有重分类的岗位
SELECT * FROM RAINY_POSITION RP WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR WHERE RP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID='115');
SELECT * FROM RAINY_POSITION RP WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR WHERE RP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID='116');
SELECT * FROM RAINY_POSITION RP WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR WHERE RP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID='139');
--拥有重分类的用户
SELECT * FROM RAINY_USER RU WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR,RAINY_USER_POSITION RUP WHERE RU.USER_ID=RUP.USER_ID AND RUP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID=115);
SELECT * FROM RAINY_USER RU WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR,RAINY_USER_POSITION RUP WHERE RU.USER_ID=RUP.USER_ID AND RUP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID=116);
SELECT * FROM RAINY_USER RU WHERE EXISTS(SELECT 1 FROM RAINY_POSITION_ROLE RPR,RAINY_USER_POSITION RUP WHERE RU.USER_ID=RUP.USER_ID AND RUP.POSITION_ID=RPR.POSITION_ID AND RPR.ROLE_ID=139);

--移除原职位权限
--查询出来的语句在sys用户下执行
SELECT 'revoke ' || 'RECLS' || ' from ' || ru.user_id || ';'
  FROM rainy_user          ru ;

   
insert into RAINY_POSITION_ROLE(role_id,position_id) values(139,36);


DELETE RAINY_POSITION_ROLE WHERE ROLE_ID=139;




